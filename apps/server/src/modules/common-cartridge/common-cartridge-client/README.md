# How to filter the swagger specification of the schulcloud using filter-spec.js script? 

You can run the script with a parameter, which is the path to the controller you want to filter. 

For example:
```bash
node ./scripts/filter-spec.js /courses 
```
The execution of the script will generate a new file in the script folder called **filtered-spec.json** with the filtered specification to the controller, you have passed as a parameter. This file should be used to generate the client code for the controller you want to use and should be **deleted** after that.
This script is also able to just select used models and operations from the swagger specification. Unused models will be ignored.

# How to generate the Api client code using openapi-generator-cli?

Use this command to generate the client and delete the filtered spec file

For example:
```bash
npx openapi-generator-cli generate -i './scripts/filtered-spec.json' -g typescript-axios -o "apps/server/src/modules/common-cartridge/common-cartridge-client/course-client/courses-api-client" --skip-validate-spec -c 'openapitools-config.json' && rm .\scripts\filtered-spec.json
```
The input file in this command is the file generated by the filter-spec.js script. The output folder is the folder where the client code will be generated. The openapitools-config.json file is the configuration file for the openapi-generator-cli. After generating the client code, the filtered-spec.json file will be deleted with the command **rm .\scripts\filtered-spec.json**.

***Make sure*** to delete the filtered-spec.json file after generating the client code, before committing the changes.

# Add the generated client code to the sonar-project.properties file
To avoid sonarqube errors, you need to add the generated client code to the sonar-project.properties file.
For example:
```properties
sonar.exclusions=**/courses-api-client/**/*.ts
sonar.exclusions.coverage=**/courses-api-client/**/*.ts
```
You can add several exclusions and separate them with a comma.



