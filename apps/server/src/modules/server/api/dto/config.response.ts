import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';
import type { ServerConfig } from '../..';

export class ConfigResponse {
	@ApiProperty()
	FEATURE_NEW_SCHOOL_ADMINISTRATION_PAGE_AS_DEFAULT_ENABLED: boolean;

	@ApiProperty()
	MIGRATION_END_GRACE_PERIOD_MS: number;

	@ApiProperty()
	FEATURE_CTL_TOOLS_TAB_ENABLED: boolean;

	@ApiProperty()
	FEATURE_LTI_TOOLS_TAB_ENABLED: boolean;

	@ApiProperty()
	FEATURE_SHOW_OUTDATED_USERS: boolean;

	@ApiProperty()
	FEATURE_ENABLE_LDAP_SYNC_DURING_MIGRATION: boolean;

	@ApiProperty()
	FEATURE_CTL_CONTEXT_CONFIGURATION_ENABLED: boolean;

	@ApiProperty()
	FEATURE_SHOW_NEW_CLASS_VIEW_ENABLED: boolean;

	@ApiProperty()
	FEATURE_CTL_TOOLS_COPY_ENABLED: boolean;

	@ApiProperty()
	FEATURE_SHOW_MIGRATION_WIZARD: boolean;

	@ApiPropertyOptional()
	MIGRATION_WIZARD_DOCUMENTATION_LINK?: string;

	@ApiProperty()
	FEATURE_TLDRAW_ENABLED: boolean;

	@ApiProperty()
	TLDRAW__ASSETS_ENABLED: boolean;

	@ApiProperty()
	TLDRAW__ASSETS_MAX_SIZE: number;

	@ApiPropertyOptional()
	TLDRAW__ASSETS_ALLOWED_EXTENSIONS_LIST?: string | undefined;

	@ApiProperty()
	ADMIN_TABLES_DISPLAY_CONSENT_COLUMN: boolean;

	@ApiProperty({ nullable: true })
	ALERT_STATUS_URL: string | null;

	@ApiProperty()
	FEATURE_ES_COLLECTIONS_ENABLED: boolean;

	@ApiProperty()
	FEATURE_EXTENSIONS_ENABLED: boolean;

	@ApiProperty()
	FEATURE_TEAMS_ENABLED: boolean;

	@ApiProperty()
	FEATURE_LERNSTORE_ENABLED: boolean;

	@ApiProperty()
	FEATURE_ADMIN_TOGGLE_STUDENT_LERNSTORE_VIEW_ENABLED: boolean;

	@ApiProperty()
	TEACHER_STUDENT_VISIBILITY__IS_CONFIGURABLE: boolean;

	@ApiProperty()
	TEACHER_STUDENT_VISIBILITY__IS_ENABLED_BY_DEFAULT: boolean;

	@ApiProperty()
	TEACHER_STUDENT_VISIBILITY__IS_VISIBLE: boolean;

	@ApiProperty()
	FEATURE_SCHOOL_POLICY_ENABLED_NEW: boolean;

	@ApiProperty()
	FEATURE_SCHOOL_TERMS_OF_USE_ENABLED: boolean;

	@ApiProperty()
	FEATURE_NEXBOARD_COPY_ENABLED: boolean;

	@ApiProperty()
	FEATURE_VIDEOCONFERENCE_ENABLED: boolean;

	constructor(config: ServerConfig) {
		this.ADMIN_TABLES_DISPLAY_CONSENT_COLUMN = config.ADMIN_TABLES_DISPLAY_CONSENT_COLUMN;
		this.ALERT_STATUS_URL = config.ALERT_STATUS_URL;
		this.FEATURE_ES_COLLECTIONS_ENABLED = config.FEATURE_ES_COLLECTIONS_ENABLED;
		this.FEATURE_EXTENSIONS_ENABLED = config.FEATURE_EXTENSIONS_ENABLED;
		this.FEATURE_TEAMS_ENABLED = config.FEATURE_TEAMS_ENABLED;
		this.FEATURE_LERNSTORE_ENABLED = config.FEATURE_LERNSTORE_ENABLED;
		this.FEATURE_ADMIN_TOGGLE_STUDENT_LERNSTORE_VIEW_ENABLED =
			config.FEATURE_ADMIN_TOGGLE_STUDENT_LERNSTORE_VIEW_ENABLED;
		this.TEACHER_STUDENT_VISIBILITY__IS_CONFIGURABLE = config.TEACHER_STUDENT_VISIBILITY__IS_CONFIGURABLE;
		this.TEACHER_STUDENT_VISIBILITY__IS_ENABLED_BY_DEFAULT = config.TEACHER_STUDENT_VISIBILITY__IS_ENABLED_BY_DEFAULT;
		this.TEACHER_STUDENT_VISIBILITY__IS_VISIBLE = config.TEACHER_STUDENT_VISIBILITY__IS_VISIBLE;
		this.FEATURE_SCHOOL_POLICY_ENABLED_NEW = config.FEATURE_SCHOOL_POLICY_ENABLED_NEW;
		this.FEATURE_SCHOOL_TERMS_OF_USE_ENABLED = config.FEATURE_SCHOOL_TERMS_OF_USE_ENABLED;
		this.FEATURE_NEXBOARD_COPY_ENABLED = config.FEATURE_NEXBOARD_COPY_ENABLED;
		//--
		this.FEATURE_NEW_SCHOOL_ADMINISTRATION_PAGE_AS_DEFAULT_ENABLED =
			config.FEATURE_NEW_SCHOOL_ADMINISTRATION_PAGE_AS_DEFAULT_ENABLED;
		this.MIGRATION_END_GRACE_PERIOD_MS = config.MIGRATION_END_GRACE_PERIOD_MS;
		this.FEATURE_CTL_TOOLS_TAB_ENABLED = config.ctlToolsTabEnabled;
		this.FEATURE_LTI_TOOLS_TAB_ENABLED = config.ltiToolsTabEnabled;
		this.FEATURE_SHOW_OUTDATED_USERS = config.FEATURE_SHOW_OUTDATED_USERS;
		this.FEATURE_ENABLE_LDAP_SYNC_DURING_MIGRATION = config.FEATURE_ENABLE_LDAP_SYNC_DURING_MIGRATION;
		this.FEATURE_CTL_CONTEXT_CONFIGURATION_ENABLED = config.contextConfigurationEnabled;
		this.FEATURE_SHOW_NEW_CLASS_VIEW_ENABLED = config.FEATURE_SHOW_NEW_CLASS_VIEW_ENABLED;
		this.FEATURE_CTL_TOOLS_COPY_ENABLED = config.ctlToolsCopyEnabled;
		this.FEATURE_SHOW_MIGRATION_WIZARD = config.FEATURE_SHOW_MIGRATION_WIZARD;
		this.MIGRATION_WIZARD_DOCUMENTATION_LINK = config.MIGRATION_WIZARD_DOCUMENTATION_LINK;
		this.FEATURE_TLDRAW_ENABLED = config.FEATURE_TLDRAW_ENABLED;
		this.TLDRAW__ASSETS_ENABLED = config.TLDRAW__ASSETS_ENABLED;
		this.TLDRAW__ASSETS_MAX_SIZE = config.TLDRAW__ASSETS_MAX_SIZE;
		this.TLDRAW__ASSETS_ALLOWED_EXTENSIONS_LIST = config.TLDRAW__ASSETS_ALLOWED_EXTENSIONS_LIST;
		this.FEATURE_VIDEOCONFERENCE_ENABLED = config.enabled;
	}
}

/**
 TODO missed keys - check type from default.schema.json
	'ROCKETCHAT_SERVICE_ENABLED',
	'LERNSTORE_MODE',
	'I18N__AVAILABLE_LANGUAGES',
	'I18N__DEFAULT_LANGUAGE',
	'I18N__DEFAULT_TIMEZONE',
	'I18N__FALLBACK_LANGUAGE',
	'JWT_SHOW_TIMEOUT_WARNING_SECONDS',
	'JWT_TIMEOUT_SECONDS',
	'NOT_AUTHENTICATED_REDIRECT_URL',
	'DOCUMENT_BASE_DIR',
	'SC_THEME',
	'SC_TITLE',
	'FEATURE_COLUMN_BOARD_ENABLED',
	'FEATURE_COLUMN_BOARD_SUBMISSIONS_ENABLED',
	'FEATURE_COLUMN_BOARD_LINK_ELEMENT_ENABLED',
	'FEATURE_COLUMN_BOARD_EXTERNAL_TOOLS_ENABLED',
	'FEATURE_COURSE_SHARE',
	'FEATURE_COURSE_SHARE_NEW',
	'FEATURE_LOGIN_LINK_ENABLED',
	'FEATURE_LESSON_SHARE',
	'FEATURE_TASK_SHARE',
	'FEATURE_USER_MIGRATION_ENABLED',
	'FEATURE_COPY_SERVICE_ENABLED',
	'ACCESSIBILITY_REPORT_EMAIL',
	'GHOST_BASE_URL',
	'FEATURE_CONSENT_NECESSARY',
	'FEATURE_IMSCC_COURSE_EXPORT_ENABLED',
	'FEATURE_SCHOOL_SANIS_USER_MIGRATION_ENABLED',
	'FEATURE_ALLOW_INSECURE_LDAP_URL_ENABLED',
 */
